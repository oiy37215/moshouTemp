<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Cocos2d-html5 Hello World test</title>
    <link rel="icon" type="image/GIF" href="res/favicon.ico"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="full-screen" content="yes"/>
    <meta name="screen-orientation" content="portrait"/>
    <meta name="x5-fullscreen" content="true"/>
    <meta name="360-fullscreen" content="true"/>
    <style>
        body, canvas, div {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            -khtml-user-select: none;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        }
    </style>
</head>
<body style="padding:0; margin: 0; background: #000;">
<canvas id="gameCanvas" width="800" height="450"></canvas>


<script cocos src="game.min.js"></script>
<script>
     	var imgUrl = 'http://oiy37215.github.io/game/gh-pages/res/CloseNormal.png';
        var lineLink = 'http://oiy37215.github.io/game';
        var shareTitle = '飞常金喜贺新春';
        var appid = 'wxc000894c65dd9f3c';
        var desc1 = '飞常金喜贺新春';
        var desc2 = '';
  wx.config({
      debug: true,
      appId: 'wxc000894c65dd9f3c',
      timestamp: 1438238387,
      nonceStr: 'helloworldhello',
      signature: 'ec17bc5e1545f6c60de27ce43604cd4ab2b4e0ce',
      jsApiList: [
      'checkJsApi',
      'onMenuShareAppMessage'
      ]
  });
  wx.ready(function () {
  
  	 wx.checkJsApi({
      jsApiList: [
        'onMenuShareAppMessage'
      ],
      success: function (res) {
        alert(JSON.stringify(res));
      },
      fail: function (res) {
        alert("checkJsApi fail!!");
      }
    });
    
     WeixinJSBridge.on('menu:share:appmessage', function(argv){
                 WeixinJSBridge.invoke('sendAppMessage',{
                "appid": appid,
                "img_url": imgUrl,
                "img_width": "200",
                "img_height": "200",
                "link": lineLink,
                "desc": desc1  + desc2,
                "title": shareTitle
            }, function(res) {
                //_report('send_msg', res.err_msg);
            });
                alert("friend");
            });
});

wx.error(function (res) {
  alert(res.errMsg);
});
</script>
</body>
</html>
